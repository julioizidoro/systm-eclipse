<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<ui:composition template="/pages/templates/default.xhtml">
	<ui:define name="corpo">
		<h:form id="consHe" style="font-size:11px;">
			<div id="centro">
				<p:growl id="growl" showDetail="true" sticky="false"
					life="#{aplicacaoMB.parametrosprodutos.tempomensagens}" />
				<br></br>
				<p:accordionPanel class="painel" activeIndex="-1">
					<p:tab titleStyle="color:#000;font-size:11px;background:#c7d95f;"
						title="Pesquisar">
						<h:panelGrid columns="2" columnClasses="tamanho7, tamanhoavisos"
							style="width:90%;margin-left:4%;">
							<p:outputLabel value="ID venda" for="idVenda" />
							<p:outputLabel value="Nome do Cliente" for="cliente" />

							<p:inputText id="idVenda" value="#{higherEducationMB.idvenda}"
								style="width:87px;" />
							<p:inputText id="cliente"
								value="#{higherEducationMB.nomeCliente}" style="width:260px;" />
						</h:panelGrid>
						<br></br>
						<h:panelGrid columns="6"
							columnClasses="tamanho7, tamanho1,tamanho8,tamanho8,tamanho7,tamanho1"
							style="width:95%;margin-left:4%;">
							<p:outputLabel value="Periodo" for="dataIni" />
							<p:outputLabel />
							<p:outputLabel value="Unidade" for="unidade" />
							<p:outputLabel value="Situação" for="situacao" />
							<p:outputLabel />
							<p:outputLabel />

							<p:calendar id="dataIni" value="#{higherEducationMB.dataInicio}"
								size="12" locale="pt" pattern="dd/MM/yyyy" mask="true"
								maxlength="15">
								<f:convertDateTime pattern="dd/MM/yyyy"
									timeZone="America/Sao_Paulo" />
								<p:ajax event="blur" />
							</p:calendar>
							<p:calendar id="dataFinal"
								value="#{higherEducationMB.dataTermino}" size="12" locale="pt"
								pattern="dd/MM/yyyy" mask="true" maxlength="15">
								<f:convertDateTime pattern="dd/MM/yyyy"
									timeZone="America/Sao_Paulo" />
								<p:ajax event="blur" />
							</p:calendar>
							<p:selectOneMenu id="unidade"
								value="#{higherEducationMB.unidadenegocio}" style="width:180px;"
								converter="UnidadeNegocioConverter"
								disabled="#{higherEducationMB.habilitarUnidade}" filter="true"
								filterMatchMode="startsWith" panelStyle="width:180px">
								<f:selectItem itemLabel="Selecione" itemValue="0"
									noSelectionOption="true" />
								<f:selectItems id="idunidade"
									value="#{higherEducationMB.listaUnidade}" var="sUnidade"
									itemLabel="#{sUnidade.nomerelatorio}" itemValue="#{sUnidade}" />
								<f:attribute name="listaUnidade"
									value="#{higherEducationMB.listaUnidade}" />
							</p:selectOneMenu>
							<p:selectOneMenu id="situacao"
								value="#{higherEducationMB.situacao}" style="width:150px;">
								<f:selectItem itemLabel="Selecione" itemValue="sn" />
								<f:selectItem itemLabel="Questionario" itemValue="Questionario" />
								<f:selectItem itemLabel="Questionario Autorizado"
									itemValue="Questionario Autorizado" />
								<f:selectItem itemLabel="Ficha Inscrição"
									itemValue="Ficha Inscrição" />
								<f:selectItem itemLabel="Ficha Inscrição Aprovada"
									itemValue="Ficha Inscrição Aprovada" />
								<f:selectItem itemLabel="Ficha Final" itemValue="Ficha Final" />
								<p:ajax event="change" />
							</p:selectOneMenu>
							<p:commandButton value="Pesquisar" icon="ui-icon-search"
								action="#{higherEducationMB.pesquisar()}"
								update="consHe:acordionPainel" />
							<p:commandButton value="Limpar" icon="ui-icon-arrowrefresh-1-w"
								update="consHe:acordionPainel, situacao, unidade, dataFinal, dataIni, cliente,"
								action="#{higherEducationMB.limpar()}" />
						</h:panelGrid>
						<br></br>
					</p:tab>     
				</p:accordionPanel>

				<legend id="iUsu2">
					<b>Consulta de Higher Education</b>
				</legend>
				<p:commandButton value="Novo Questionario" icon="ui-icon-plus"
					update=":consHe:growl" onsuccess="PF('novaficha').show();"
					style="font-size:12px;margin-left:79.5%" />

				<p:dialog message="CRM" showEffect="fade" hideEffect="fade"
					header="ATENÇÃO" width="36%" icon="ui-icon-alert"
					widgetVar="novaficha" style="font-size:14px">
					<h:panelGroup style="margin-left:2%;">
						<h:outputText
							value="Por favor emitir a venda através da ferramenta CRM. Obrigado"
							style="font-size:16px;" />
					</h:panelGroup>
					<br />
					<br />
					<p:commandButton
						action="#{higherEducationMB.notificarEfetuarFichaCrm()}"
						value="Ir para CRM" oncomplete="PF('novaficha').hide();"
						styleClass="ui-confirmdialog-yes"
						style="margin-left:40%;font-size:12px" />
					<br />   
				</p:dialog>
				<br></br> <br></br>
				<p:tabView id="acordionPainel" class="consultaCurso">
					<p:tab title="Processo (#{higherEducationMB.nFichasProcesso})"
						titleStyle="font-size:11px;">
						<p:dataTable id="tabelaProcesso" var="processo"     
							value="#{higherEducationMB.listaProcesso}" scrollable="true"
							scrollHeight="300" style="margin-bottom:20px">  
							<p:column headerText="" style="width:37px;text-align:center;"
								styleClass="alinharCenter">
								<img src="#{higherEducationMB.retornarimagem(processo.status)}"
									width="25"
									title="#{higherEducationMB.retornarTituloFicha(processo.status)}" />
							</p:column>
							<p:column headerText="ID" sortBy="#{processo.idVenda}"
								style="width:50px;" styleClass="alinharCenter">
								<h:outputText value="#{processo.idVenda}"
									style="#{higherEducationMB.cor(processo)}" />
							</p:column>
							<p:column headerText="Cliente" sortBy="#{processo.nomecliente}"
								style="width:150px; ">
								<h:outputText value="#{processo.nomecliente}"
									style="#{higherEducationMB.corNome(processo)}" />
							</p:column>
							<p:column headerText="Data Envio" sortBy="#{processo.data}"
								style="text-align:center;width:67px;">     
								<h:outputText value="#{processo.data}"       
									style="#{higherEducationMB.cor(processo)}">
									<f:convertDateTime pattern="dd/MM/yyyy"
										timeZone="America/Sao_Paulo" />
								</h:outputText>
							</p:column>
							<p:column headerText="Unidade" sortBy="#{processo.unidade}"
								style="width:85px;" styleClass="alinharCenter">
								<h:outputText value="#{processo.unidade}"
									style="#{higherEducationMB.cor(processo)}" />
							</p:column>
							<p:column headerText="Consultor" sortBy="#{processo.consultor}"
								style="width:120px;" styleClass="alinharCenter">
								<h:outputText value="#{processo.consultor}"
									style="#{higherEducationMB.cor(processo)}" />
							</p:column>
							<p:column headerText="Parceiro" sortBy="#{processo.fornecedor}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{processo.fornecedor}"
									style="#{higherEducationMB.cor(processo)}" />
							</p:column>
							<p:column headerText="Situação" sortBy="#{processo.situacao}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{processo.situacao}"
									style="#{higherEducationMB.cor(processo)}" />  
							</p:column>
							<p:column style="width:43px;text-align:center;">
								<p:commandLink action="#{higherEducationMB.editar(processo)}"
									title="Editar" style="text-decoration: none">
									<img src="../../resources/img/editaricon.png" width="27" />
								</p:commandLink>
							</p:column>
							<p:column headerText="Imprimir"
								style="width:70px;text-align:center;" styleClass="alinharCenter">
								
								<p:commandLink action="#{higherEducationMB.fichaHE(processo)}"
									title="Ficha" ajax="false"
									 target="_blank" rendered="#{higherEducationMB.desabilitarBtnFichaInscricao(processo)}"
									style="width:27px;margin-left:2%">
									<img src="../../resources/img/imprimiFicha.png" />
								</p:commandLink>   
								<h:commandButton
									action="#{higherEducationMB.contrato(processo)}"
									title="Contrato de Higher Education"
									image="../../resources/img/imprimiContrato.png" ajax="false"
									onclick="this.form.target='_blank'"
									style="width:27px;margin-left:2%"
									rendered="#{higherEducationMB.desabilitarBtnContrato(processo)}">
								</h:commandButton>
							</p:column>

							<p:column headerText="Autorizar"
								style="width:60px;text-align:center;" styleClass="alinharCenter"
								rendered="#{usuarioLogadoMB.usuario.grupoacesso.acesso.aprovarquestionariohe}">
								<p:selectBooleanCheckbox value="#{processo.autorizado}"
									disabled="#{higherEducationMB.desabilitarBtnAutorizar(processo)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.autorizarQuestionario(processo)}"
										update="@form" />
								</p:selectBooleanCheckbox>
							</p:column>
							<p:column headerText="Desistência"
								style="width:78px;text-align:center;" styleClass="alinharCenter" >
								<p:selectBooleanCheckbox value="#{processo.desistencia}"
									disabled="#{higherEducationMB.desabilitarBtnDesistencia(processo)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.desistenciaHE(processo)}"
										update="@form" />  
								</p:selectBooleanCheckbox>  
							</p:column> 
							<p:column headerText="Opções"
								style="width:72px;text-align:center;">
								<p:commandLink id="btnInformacoes" title="Visualizar opções.">
									<img src="../../resources/img/informacaoVendaVerde.png" />
								</p:commandLink>
								<p:overlayPanel id="painelInformacoes" for="btnInformacoes"
									hideEffect="fade"
									style="background:#F0F0F0;width:550px; border:none;">
									<p:outputLabel
										value="#{processo.idVenda} - #{processo.nomecliente}"
										style="text-align:center;font-size:15px;" />
									<br />
									<br />
									<h:panelGrid
										style="width:100%;border-color:transparent;border:none;"
										columns="5">

										<p:commandLink action="#{higherEducationMB.boletos(processo)}"
											title="IMPRIMIR OS BOLETOS"
											image="../../resources/img/boletoFicha.png" ajax="false"
											target="_blank" update=":consHe:growl">
											<img src="../../resources/img/boletoFicha.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="BOLETOS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.documentacao(processo)}"
											title="DOCUMENTOS">
											<img src="../../resources/img/arquivosUpload.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="DOCS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.informacoes(processo)}"
											update=":consHe:growl" title="INFORMAÇÕES DA VENDA">
											<img src="../../resources/img/informacao.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="INFO" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink
											action="#{higherEducationMB.visualizarContasReceber(processo)}"
											title="VISUALIZAR CONTAS A RECEBER">
											<img src="../../resources/img/invoice.png" width="36" />
											<h:panelGrid columns="1" style="text-align:center;">
												<p:outputLabel value="CONTAS A" style="font-size:10px;" />
												<p:outputLabel value="RECEBER" style="font-size:10px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.cancelarVenda(processo)}"
											style="text-decoration: none" title="CANCELAR FICHA"
											update="@form">
											<p:confirm header="Cancelamento"
												message="Deseja Cancelar Ficha?" icon="ui-icon-alert" />
											<img src="../../resources/img/cancel.png" style="width: 36" />
											<p:ajax event="dialogReturn"
												listener="#{higherEducationMB.gerarListaHe()}"
												process="@this" update="@form" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="CANCELAR" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

									</h:panelGrid>
								</p:overlayPanel>
							</p:column>
						</p:dataTable>
					</p:tab>
					 <p:tab title="Financeiro (#{higherEducationMB.nFichaFinanceiro})"
						titleStyle="font-size:11px;">
						<p:dataTable id="tabelaFinanceiro" var="financeiro" 
							value="#{higherEducationMB.listaFinanceiro}" scrollable="true"
							scrollHeight="300" style="margin-bottom:20px">
							<p:column headerText="" style="width:37px;text-align:center;"
								styleClass="alinharCenter">
								<img src="#{higherEducationMB.retornarimagem(financeiro.status)}"
									width="25"
									title="#{higherEducationMB.retornarTituloFicha(financeiro.status)}" />
							</p:column>
							<p:column headerText="ID" sortBy="#{financeiro.idVenda}"
								style="width:50px;" styleClass="alinharCenter">
								<h:outputText value="#{financeiro.idVenda}"
									style="#{higherEducationMB.cor(financeiro)}" />
							</p:column>
							<p:column headerText="Cliente" sortBy="#{financeiro.nomecliente}"
								style="width:150px; ">
								<h:outputText value="#{financeiro.nomecliente}"
									style="#{higherEducationMB.corNome(financeiro)}" />
							</p:column>
							<p:column headerText="Data Envio" sortBy="#{financeiro.data}"
								style="text-align:center;width:67px;">
								<h:outputText value="#{financeiro.data}"
									style="#{higherEducationMB.cor(financeiro)}">
									<f:convertDateTime pattern="dd/MM/yyyy"
										timeZone="America/Sao_Paulo" />
								</h:outputText>
							</p:column>
							<p:column headerText="Unidade" sortBy="#{financeiro.unidade}"
								style="width:85px;" styleClass="alinharCenter">
								<h:outputText value="#{financeiro.unidade}"
									style="#{higherEducationMB.cor(financeiro)}" />
							</p:column>
							<p:column headerText="Consultor" sortBy="#{financeiro.consultor}"
								style="width:120px;" styleClass="alinharCenter">
								<h:outputText value="#{financeiro.consultor}"
									style="#{higherEducationMB.cor(financeiro)}" />
							</p:column>
							<p:column headerText="Parceiro" sortBy="#{financeiro.fornecedor}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{financeiro.fornecedor}"
									style="#{higherEducationMB.cor(financeiro)}" />
							</p:column>
							<p:column headerText="Situação" sortBy="#{financeiro.situacao}"
								style="width:115px;" styleClass="alinharCenter">
								<h:outputText value="#{financeiro.situacao}"
									style="#{higherEducationMB.cor(financeiro)}" />
							</p:column>
							<p:column style="width:43px;text-align:center;">
								<p:commandLink action="#{higherEducationMB.editar(financeiro)}"
									title="Editar" style="text-decoration: none">
									<img src="../../resources/img/editaricon.png" width="27" />
								</p:commandLink>
							</p:column>
							<p:column headerText="Imprimir"
								style="width:70px;text-align:center;" styleClass="alinharCenter">
								   
								<p:commandLink action="#{higherEducationMB.fichaHE(financeiro)}"
									title="Ficha" ajax="false"
									 target="_blank" rendered="#{higherEducationMB.desabilitarBtnFichaInscricao(financeiro)}"
									style="width:27px;margin-left:2%">
									<img src="../../resources/img/imprimiFicha.png" />
								</p:commandLink>   
								<h:commandButton
									action="#{higherEducationMB.contrato(financeiro)}"
									title="Contrato de Higher Education"
									image="../../resources/img/imprimiContrato.png" ajax="false"
									onclick="this.form.target='_blank'"
									style="width:27px;margin-left:2%"
									rendered="#{higherEducationMB.desabilitarBtnContrato(financeiro)}">
								</h:commandButton>
							</p:column>

							<p:column headerText="Autorizar"
								style="width:60px;text-align:center;" styleClass="alinharCenter"
								rendered="#{usuarioLogadoMB.usuario.grupoacesso.acesso.aprovarquestionariohe}">
								<p:selectBooleanCheckbox value="#{financeiro.autorizado}"
									disabled="#{higherEducationMB.desabilitarBtnAutorizar(financeiro)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.autorizarQuestionario(financeiro)}"
										update="@form" />
								</p:selectBooleanCheckbox>
							</p:column>
							<p:column headerText="Desistência"
								style="width:85px;text-align:center;" styleClass="alinharCenter" >
								<p:selectBooleanCheckbox value="#{financeiro.desistencia}"
									disabled="#{higherEducationMB.desabilitarBtnDesistencia(financeiro)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.desistenciaHE(financeiro)}"
										update="@form" />
								</p:selectBooleanCheckbox>
							</p:column>   

							<p:column headerText="Opções"
								style="width:67px;text-align:center;">
								<p:commandLink id="btnInformacoes" title="Visualizar opções.">
									<img src="../../resources/img/informacaoVendaVerde.png" />
								</p:commandLink>
								<p:overlayPanel id="painelInformacoes" for="btnInformacoes"
									hideEffect="fade"
									style="background:#F0F0F0;width:550px; border:none;">
									<p:outputLabel
										value="#{financeiro.idVenda} - #{financeiro.nomecliente}"
										style="text-align:center;font-size:15px;" />
									<br />
									<br />
									<h:panelGrid
										style="width:100%;border-color:transparent;border:none;"
										columns="5">

										<p:commandLink action="#{higherEducationMB.boletos(financeiro)}"
											title="IMPRIMIR OS BOLETOS"
											image="../../resources/img/boletoFicha.png" ajax="false"
											target="_blank" update=":consHe:growl">
											<img src="../../resources/img/boletoFicha.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="BOLETOS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>   

										<p:commandLink action="#{higherEducationMB.documentacao(financeiro)}"
											title="DOCUMENTOS">
											<img src="../../resources/img/arquivosUpload.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="DOCS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.informacoes(financeiro)}"
											update=":consHe:growl" title="INFORMAÇÕES DA VENDA">
											<img src="../../resources/img/informacao.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="INFO" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink
											action="#{higherEducationMB.visualizarContasReceber(financeiro)}"
											title="VISUALIZAR CONTAS A RECEBER">
											<img src="../../resources/img/invoice.png" width="36" />
											<h:panelGrid columns="1" style="text-align:center;">
												<p:outputLabel value="CONTAS A" style="font-size:10px;" />
												<p:outputLabel value="RECEBER" style="font-size:10px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.cancelarVenda(financeiro)}"
											style="text-decoration: none" title="CANCELAR FICHA"
											update="@form">
											<p:confirm header="Cancelamento"
												message="Deseja Cancelar Ficha?" icon="ui-icon-alert" />
											<img src="../../resources/img/cancel.png" style="width: 36" />
											<p:ajax event="dialogReturn"
												listener="#{higherEducationMB.gerarListaHe()}"
												process="@this" update="@form" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="CANCELAR" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

									</h:panelGrid>
								</p:overlayPanel>
							</p:column>
						</p:dataTable>
					</p:tab>   
					 <p:tab title="Andamento (#{higherEducationMB.nFichasAndamento})"
						titleStyle="font-size:11px;">
						<p:dataTable id="tabelaAndamento" var="andamento" 
							value="#{higherEducationMB.listaAndamento}" scrollable="true"
							scrollHeight="300" style="margin-bottom:20px">
							<p:column headerText="" style="width:37px;text-align:center;"
								styleClass="alinharCenter">
								<img src="#{higherEducationMB.retornarimagem(andamento.status)}"
									width="25"
									title="#{higherEducationMB.retornarTituloFicha(andamento.status)}" />
							</p:column>
							<p:column headerText="ID" sortBy="#{andamento.idVenda}"
								style="width:50px;" styleClass="alinharCenter">
								<h:outputText value="#{andamento.idVenda}"
									style="#{higherEducationMB.cor(andamento)}" />
							</p:column>
							<p:column headerText="Cliente" sortBy="#{andamento.nomecliente}"
								style="width:150px; ">
								<h:outputText value="#{andamento.nomecliente}"
									style="#{higherEducationMB.corNome(andamento)}" />
							</p:column>
							<p:column headerText="Data Envio" sortBy="#{andamento.data}"
								style="text-align:center;width:67px;">
								<h:outputText value="#{andamento.data}"
									style="#{higherEducationMB.cor(andamento)}">
									<f:convertDateTime pattern="dd/MM/yyyy"
										timeZone="America/Sao_Paulo" />
								</h:outputText>
							</p:column>
							<p:column headerText="Unidade" sortBy="#{andamento.unidade}"
								style="width:85px;" styleClass="alinharCenter">
								<h:outputText value="#{andamento.unidade}"
									style="#{higherEducationMB.cor(andamento)}" />
							</p:column>
							<p:column headerText="Consultor" sortBy="#{andamento.consultor}"
								style="width:120px;" styleClass="alinharCenter">
								<h:outputText value="#{andamento.consultor}"
									style="#{higherEducationMB.cor(andamento)}" />
							</p:column>
							<p:column headerText="Parceiro" sortBy="#{andamento.fornecedor}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{andamento.fornecedor}"
									style="#{higherEducationMB.cor(andamento)}" />
							</p:column>
							<p:column headerText="Situação" sortBy="#{andamento.situacao}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{andamento.situacao}"
									style="#{higherEducationMB.cor(andamento)}" />   
							</p:column>
							<p:column style="width:43px;text-align:center;">
								<p:commandLink action="#{higherEducationMB.editar(andamento)}"
									title="Editar" style="text-decoration: none">
									<img src="../../resources/img/editaricon.png" width="27" />
								</p:commandLink>
							</p:column>
							<p:column headerText="Imprimir"
								style="width:70px;text-align:center;" styleClass="alinharCenter">
								
								<p:commandLink action="#{higherEducationMB.fichaHE(andamento)}"
									title="Ficha" ajax="false"
									 target="_blank" rendered="#{higherEducationMB.desabilitarBtnFichaInscricao(andamento)}"
									style="width:27px;margin-left:2%">
									<img src="../../resources/img/imprimiFicha.png" />
								</p:commandLink>   
								<h:commandButton
									action="#{higherEducationMB.contrato(andamento)}"
									title="Contrato de Higher Education"
									image="../../resources/img/imprimiContrato.png" ajax="false"
									onclick="this.form.target='_blank'"
									style="width:27px;margin-left:2%"
									rendered="#{higherEducationMB.desabilitarBtnContrato(andamento)}">
								</h:commandButton>
							</p:column>

							<p:column headerText="Autorizar"
								style="width:60px;text-align:center;" styleClass="alinharCenter"
								rendered="#{usuarioLogadoMB.usuario.grupoacesso.acesso.aprovarquestionariohe}">
								<p:selectBooleanCheckbox value="#{andamento.autorizado}"
									disabled="#{higherEducationMB.desabilitarBtnAutorizar(andamento)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.autorizarQuestionario(andamento)}"
										update="@form" />  
								</p:selectBooleanCheckbox>
							</p:column>  
							<p:column headerText="Desistência"
								style="width:80px;text-align:center;" styleClass="alinharCenter" >
								<p:selectBooleanCheckbox value="#{andamento.desistencia}"
									disabled="#{higherEducationMB.desabilitarBtnDesistencia(andamento)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.desistenciaHE(andamento)}"
										update="@form" />
								</p:selectBooleanCheckbox>    
							</p:column> 
							<p:column headerText="Opções"
								style="width:75px;text-align:center;">
								<p:commandLink id="btnInformacoes" title="Visualizar opções.">
									<img src="../../resources/img/informacaoVendaVerde.png" />
								</p:commandLink>
								<p:overlayPanel id="painelInformacoes" for="btnInformacoes"
									hideEffect="fade"
									style="background:#F0F0F0;width:550px; border:none;">
									<p:outputLabel
										value="#{andamento.idVenda} - #{andamento.nomecliente}"
										style="text-align:center;font-size:15px;" />
									<br />
									<br />
									<h:panelGrid
										style="width:100%;border-color:transparent;border:none;"
										columns="5">

										<p:commandLink action="#{higherEducationMB.boletos(andamento)}"
											title="IMPRIMIR OS BOLETOS"
											image="../../resources/img/boletoFicha.png" ajax="false"
											target="_blank" update=":consHe:growl">
											<img src="../../resources/img/boletoFicha.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="BOLETOS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.documentacao(andamento)}"
											title="DOCUMENTOS">
											<img src="../../resources/img/arquivosUpload.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="DOCS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.informacoes(andamento)}"
											update=":consHe:growl" title="INFORMAÇÕES DA VENDA">
											<img src="../../resources/img/informacao.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="INFO" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink
											action="#{higherEducationMB.visualizarContasReceber(andamento)}"
											title="VISUALIZAR CONTAS A RECEBER">
											<img src="../../resources/img/invoice.png" width="36" />
											<h:panelGrid columns="1" style="text-align:center;">
												<p:outputLabel value="CONTAS A" style="font-size:10px;" />
												<p:outputLabel value="RECEBER" style="font-size:10px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.cancelarVenda(andamento)}"
											style="text-decoration: none" title="CANCELAR FICHA"
											update="@form">
											<p:confirm header="Cancelamento"
												message="Deseja Cancelar Ficha?" icon="ui-icon-alert" />
											<img src="../../resources/img/cancel.png" style="width: 36" />
											<p:ajax event="dialogReturn"
												listener="#{higherEducationMB.gerarListaHe()}"
												process="@this" update="@form" />  
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="CANCELAR" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

									</h:panelGrid>
								</p:overlayPanel>
							</p:column>
						</p:dataTable>
					</p:tab>    
					 <p:tab title="Finalizado (#{higherEducationMB.nFichasFinalizada})"
						titleStyle="font-size:11px;">
						<p:dataTable id="tabelaFinalizado" var="finalizado" 
							value="#{higherEducationMB.listaFinalizar}" scrollable="true"
							scrollHeight="300" style="margin-bottom:20px">
							<p:column headerText="" style="width:37px;text-align:center;"
								styleClass="alinharCenter">
								<img src="#{higherEducationMB.retornarimagem(finalizado.status)}"
									width="25"
									title="#{higherEducationMB.retornarTituloFicha(finalizado.status)}" />
							</p:column>
							<p:column headerText="ID" sortBy="#{finalizado.idVenda}"
								style="width:50px;" styleClass="alinharCenter">
								<h:outputText value="#{finalizado.idVenda}"
									style="#{higherEducationMB.cor(finalizado)}" />
							</p:column>
							<p:column headerText="Cliente" sortBy="#{finalizado.nomecliente}"
								style="width:150px; ">
								<h:outputText value="#{finalizado.nomecliente}"
									style="#{higherEducationMB.corNome(finalizado)}" />
							</p:column>
							<p:column headerText="Data Envio" sortBy="#{finalizado.data}"
								style="text-align:center;width:67px;">
								<h:outputText value="#{finalizado.data}"
									style="#{higherEducationMB.cor(finalizado)}">
									<f:convertDateTime pattern="dd/MM/yyyy"
										timeZone="America/Sao_Paulo" />
								</h:outputText>
							</p:column>
							<p:column headerText="Unidade" sortBy="#{finalizado.unidade}"
								style="width:85px;" styleClass="alinharCenter">
								<h:outputText value="#{finalizado.unidade}"
									style="#{higherEducationMB.cor(finalizado)}" />
							</p:column>
							<p:column headerText="Consultor" sortBy="#{finalizado.consultor}"
								style="width:120px;" styleClass="alinharCenter">
								<h:outputText value="#{finalizado.consultor}"
									style="#{higherEducationMB.cor(finalizado)}" />
							</p:column>
							<p:column headerText="Parceiro" sortBy="#{finalizado.fornecedor}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{finalizado.fornecedor}"
									style="#{higherEducationMB.cor(finalizado)}" />
							</p:column>
							<p:column headerText="Situação" sortBy="#{finalizado.situacao}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{finalizado.situacao}"
									style="#{higherEducationMB.cor(finalizado)}" />
							</p:column>
							<p:column style="width:43px;text-align:center;">
								<p:commandLink action="#{higherEducationMB.editar(finalizado)}"
									title="Editar" style="text-decoration: none">
									<img src="../../resources/img/editaricon.png" width="27" />
								</p:commandLink>
							</p:column>
							<p:column headerText="Imprimir"
								style="width:70px;text-align:center;" styleClass="alinharCenter">
								
								<p:commandLink action="#{higherEducationMB.fichaHE(finalizado)}"
									title="Ficha" ajax="false"
									 target="_blank" rendered="#{higherEducationMB.desabilitarBtnFichaInscricao(finalizado)}"
									style="width:27px;margin-left:2%">
									<img src="../../resources/img/imprimiFicha.png" style="width:27px;"/>
								</p:commandLink>   
								<p:commandLink
									action="#{higherEducationMB.contrato(finalizado)}"
									title="Contrato de Higher Education" ajax="false"
									target="_blank"
									style="margin-left:2%"
									rendered="#{higherEducationMB.desabilitarBtnContrato(finalizado)}">
									<img src="../../resources/img/imprimiContrato.png" style="width:27px;"/>
								</p:commandLink>
							</p:column> 
							<p:column headerText="Autorizar"
								style="width:60px;text-align:center;" styleClass="alinharCenter"
								rendered="#{usuarioLogadoMB.usuario.grupoacesso.acesso.aprovarquestionariohe}">
								<p:selectBooleanCheckbox value="#{finalizado.autorizado}"
									disabled="#{higherEducationMB.desabilitarBtnAutorizar(finalizado)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.autorizarQuestionario(finalizado)}"
										update="@form" />
								</p:selectBooleanCheckbox>   
							</p:column>      
							<p:column headerText="Desistência"
								style="width:80px;text-align:center;" styleClass="alinharCenter" >
								<p:selectBooleanCheckbox value="#{finalizado.desistencia}"
									disabled="#{higherEducationMB.desabilitarBtnDesistencia(finalizado)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.desistenciaHE(finalizado)}"
										update="@form" />
								</p:selectBooleanCheckbox>    
							</p:column> 
							<p:column headerText="Opções"      
								style="width:75px;text-align:center;">
								<p:commandLink id="btnInformacoes" title="Visualizar opções.">
									<img src="../../resources/img/informacaoVendaVerde.png" />
								</p:commandLink>
								<p:overlayPanel id="painelInformacoes" for="btnInformacoes"
									hideEffect="fade"
									style="background:#F0F0F0;width:550px; border:none;">
									<p:outputLabel
										value="#{finalizado.idVenda} - #{finalizado.nomecliente}"
										style="text-align:center;font-size:15px;" />
									<br />
									<br />
									<h:panelGrid
										style="width:100%;border-color:transparent;border:none;"
										columns="5">

										<p:commandLink action="#{higherEducationMB.boletos(finalizado)}"
											title="IMPRIMIR OS BOLETOS"
											image="../../resources/img/boletoFicha.png" ajax="false"
											target="_blank" update=":consHe:growl">
											<img src="../../resources/img/boletoFicha.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="BOLETOS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.documentacao(finalizado)}"
											title="DOCUMENTOS">
											<img src="../../resources/img/arquivosUpload.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="DOCS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink> 

										<p:commandLink action="#{higherEducationMB.informacoes(finalizado)}"
											update=":consHe:growl" title="INFORMAÇÕES DA VENDA">
											<img src="../../resources/img/informacao.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="INFO" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink
											action="#{higherEducationMB.visualizarContasReceber(finalizado)}"
											title="VISUALIZAR CONTAS A RECEBER">
											<img src="../../resources/img/invoice.png" width="36" />
											<h:panelGrid columns="1" style="text-align:center;">
												<p:outputLabel value="CONTAS A" style="font-size:10px;" />
												<p:outputLabel value="RECEBER" style="font-size:10px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.cancelarVenda(finalizado)}"
											style="text-decoration: none" title="CANCELAR FICHA"
											update="@form">
											<p:confirm header="Cancelamento"
												message="Deseja Cancelar Ficha?" icon="ui-icon-alert" />
											<img src="../../resources/img/cancel.png" style="width: 36" />
											<p:ajax event="dialogReturn"
												listener="#{higherEducationMB.gerarListaHe()}"
												process="@this" update="@form" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="CANCELAR" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

									</h:panelGrid>
								</p:overlayPanel>  
							</p:column>
						</p:dataTable>
					</p:tab>   
					 <p:tab title="Cancelado (#{higherEducationMB.nFichaCancelada})"
						titleStyle="font-size:11px;">
						<p:dataTable id="tabelaCancelado" var="cancelado" 
							value="#{higherEducationMB.listaCancelada}" scrollable="true"
							scrollHeight="300" style="margin-bottom:20px">
							<p:column headerText="" style="width:37px;text-align:center;"
								styleClass="alinharCenter">
								<img src="#{higherEducationMB.retornarimagem(cancelado.status)}"
									width="25"
									title="#{higherEducationMB.retornarTituloFicha(cancelado.status)}" />
							</p:column>
							<p:column headerText="ID" sortBy="#{cancelado.idVenda}"
								style="width:50px;" styleClass="alinharCenter">
								<h:outputText value="#{cancelado.idVenda}"
									style="#{higherEducationMB.cor(cancelado)}" />
							</p:column>
							<p:column headerText="Cliente" sortBy="#{cancelado.nomecliente}"
								style="width:150px; ">
								<h:outputText value="#{cancelado.nomecliente}"
									style="#{higherEducationMB.corNome(cancelado)}" />
							</p:column>
							<p:column headerText="Data Envio" sortBy="#{cancelado.data}"
								style="text-align:center;width:67px;">
								<h:outputText value="#{cancelado.data}"
									style="#{higherEducationMB.cor(cancelado)}">
									<f:convertDateTime pattern="dd/MM/yyyy"
										timeZone="America/Sao_Paulo" />
								</h:outputText>
							</p:column>
							<p:column headerText="Unidade" sortBy="#{cancelado.unidade}"
								style="width:85px;" styleClass="alinharCenter">
								<h:outputText value="#{cancelado.unidade}"
									style="#{higherEducationMB.cor(cancelado)}" />
							</p:column>
							<p:column headerText="Consultor" sortBy="#{cancelado.consultor}"
								style="width:120px;" styleClass="alinharCenter">
								<h:outputText value="#{cancelado.consultor}"
									style="#{higherEducationMB.cor(cancelado)}" />
							</p:column>
							<p:column headerText="Parceiro" sortBy="#{cancelado.fornecedor}"
								style="width:110px;" styleClass="alinharCenter">
								<h:outputText value="#{cancelado.fornecedor}"
									style="#{higherEducationMB.cor(cancelado)}" />
							</p:column>
							<p:column headerText="Situação" sortBy="#{cancelado.situacao}"
								style="width:115px;" styleClass="alinharCenter">
								<h:outputText value="#{cancelado.situacao}"
									style="#{higherEducationMB.cor(cancelado)}" />
							</p:column>
							<p:column style="width:43px;text-align:center;">
								<p:commandLink action="#{higherEducationMB.editar(cancelado)}"
									title="Editar" style="text-decoration: none">
									<img src="../../resources/img/editaricon.png" width="27" />
								</p:commandLink>
							</p:column>
							<p:column headerText="Imprimir"
								style="width:70px;text-align:center;" styleClass="alinharCenter">
								
								<p:commandLink action="#{higherEducationMB.fichaHE(cancelado)}"
									title="Ficha" ajax="false"
									 target="_blank" rendered="#{higherEducationMB.desabilitarBtnFichaInscricao(cancelado)}"
									style="width:27px;margin-left:2%">
									<img src="../../resources/img/imprimiFicha.png" />
								</p:commandLink> 
								<h:commandButton
									action="#{higherEducationMB.contrato(cancelado)}"
									title="Contrato de Higher Education"
									image="../../resources/img/imprimiContrato.png" ajax="false"
									onclick="this.form.target='_blank'"
									style="width:27px;margin-left:2%"
									rendered="#{higherEducationMB.desabilitarBtnContrato(cancelado)}">
								</h:commandButton>
							</p:column>

							<p:column headerText="Autorizar"
								style="width:60px;text-align:center;" styleClass="alinharCenter"
								rendered="#{usuarioLogadoMB.usuario.grupoacesso.acesso.aprovarquestionariohe}">
								<p:selectBooleanCheckbox value="#{cancelado.autorizado}"
									disabled="#{higherEducationMB.desabilitarBtnAutorizar(cancelado)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.autorizarQuestionario(cancelado)}"
										update="tabelaCancelado" />
								</p:selectBooleanCheckbox>
							</p:column>
							<p:column headerText="Desistência"
								style="width:85px;text-align:center;" styleClass="alinharCenter" >
								<p:selectBooleanCheckbox value="#{cancelado.desistencia}"
									disabled="#{higherEducationMB.desabilitarBtnDesistencia(cancelado)}">
									<p:ajax event="change"
										listener="#{higherEducationMB.desistenciaHE(cancelado)}"
										update="@form" />  
								</p:selectBooleanCheckbox>    
							</p:column> 
							<p:column headerText="Opções"
								style="width:75px;text-align:center;">
								<p:commandLink id="btnInformacoes" title="Visualizar opções.">
									<img src="../../resources/img/informacaoVendaVerde.png" />
								</p:commandLink>
								<p:overlayPanel id="painelInformacoes" for="btnInformacoes"
									hideEffect="fade"
									style="background:#F0F0F0;width:550px; border:none;">
									<p:outputLabel
										value="#{cancelado.idVenda} - #{cancelado.nomecliente}"
										style="text-align:center;font-size:15px;" />
									<br />
									<br />   
									<h:panelGrid
										style="width:100%;border-color:transparent;border:none;"
										columns="5">

										<p:commandLink action="#{higherEducationMB.boletos(cancelado)}"
											title="IMPRIMIR OS BOLETOS"
											image="../../resources/img/boletoFicha.png" ajax="false"
											target="_blank" update=":consHe:growl">
											<img src="../../resources/img/boletoFicha.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="BOLETOS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.documentacao(cancelado)}"
											title="DOCUMENTOS">
											<img src="../../resources/img/arquivosUpload.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="DOCS" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.informacoes(cancelado)}"
											update=":consHe:growl" title="INFORMAÇÕES DA VENDA">
											<img src="../../resources/img/informacao.png" width="36" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="INFO" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink
											action="#{higherEducationMB.visualizarContasReceber(cancelado)}"
											title="VISUALIZAR CONTAS A RECEBER">
											<img src="../../resources/img/invoice.png" width="36" />
											<h:panelGrid columns="1" style="text-align:center;">
												<p:outputLabel value="CONTAS A" style="font-size:10px;" />
												<p:outputLabel value="RECEBER" style="font-size:10px;" />
											</h:panelGrid>
										</p:commandLink>

										<p:commandLink action="#{higherEducationMB.cancelarVenda(cancelado)}"
											style="text-decoration: none" title="CANCELAR FICHA"
											update="@form">
											<p:confirm header="Cancelamento"
												message="Deseja Cancelar Ficha?" icon="ui-icon-alert" />
											<img src="../../resources/img/cancel.png" style="width: 36" />
											<p:ajax event="dialogReturn"
												listener="#{higherEducationMB.gerarListaHe()}"
												process="@this" update="@form" />
											<h:panelGrid columns="1" style="text-align:1px;">
												<p:outputLabel value="CANCELAR" style="font-size:11px;" />
											</h:panelGrid>
										</p:commandLink>   
									</h:panelGrid>
								</p:overlayPanel>
							</p:column>
						</p:dataTable>
					</p:tab>    
				</p:tabView>   
				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
					style="background:#DDDDE1;">
					<div align="center">
						<p:commandButton value="Sim" type="button"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check"
							style="font-size:12px;" />
						<p:commandButton value="Não" type="button"
							styleClass="ui-confirmdialog-no" icon="ui-icon-close"
							style="font-size:12px;" />
					</div>
				</p:confirmDialog>
				<style>
.ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td,
	.ui-datatable tfoot th {
	padding: 2px 2px;
	overflow: hidden;
	border-width: 0px;
	border-style: solid;
}

.ui-confirm-dialog-message {
	display: inline-block;
	margin-top: 1px;
	font-size: 17px !important;
}
</style>
				<br></br> <br></br>
			</div>
		</h:form>
	</ui:define>
</ui:composition>
</html>
