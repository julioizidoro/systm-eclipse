<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<ui:composition template="/pages/templates/default.xhtml">
	<ui:define name="corpo">
		<h:form id="consHe" style="font-size:11px;">
			<div id="centro">
				<p:growl id="growl" showDetail="true" sticky="false" life="#{aplicacaoMB.parametrosprodutos.tempomensagens}"/>
				<br></br>
				<p:accordionPanel class="painel" activeIndex="-1">
					<p:tab titleStyle="color:#000;font-size:11px;background:#c7d95f;" title="Pesquisar">
						<h:panelGrid columns="2" columnClasses="tamanho7, tamanhoavisos" style="width:90%;margin-left:4%;">
							<p:outputLabel value="ID venda" for="idVenda" />
							<p:outputLabel value="Nome do Cliente" for="cliente" />
						
							<p:inputText id="idVenda" value="#{higherEducationMB.idvenda}" style="width:87px;" />
							<p:inputText id="cliente" value="#{higherEducationMB.nomeCliente}" style="width:260px;" />
						</h:panelGrid>  
						<br></br>
						<h:panelGrid columns="6" columnClasses="tamanho7, tamanho1,tamanho8,tamanho8,tamanho7,tamanho1" style="width:95%;margin-left:4%;">
							<p:outputLabel value="Periodo" for="dataIni"/>
							<p:outputLabel/>
							<p:outputLabel value="Unidade" for="unidade" />
							<p:outputLabel value="Situação" for="situacao" />
							<p:outputLabel/>
							<p:outputLabel/>
						
							<p:calendar id="dataIni" value="#{higherEducationMB.dataInicio}" size="12"
								 locale="pt" pattern="dd/MM/yyyy" mask="true" maxlength="15">
								<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" />
								<p:ajax event="blur" />
							</p:calendar>
							<p:calendar id="dataFinal" value="#{higherEducationMB.dataTermino}"
								size="12"  locale="pt" pattern="dd/MM/yyyy" mask="true" maxlength="15">
								<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" />
								<p:ajax event="blur" />
							</p:calendar>
							<p:selectOneMenu id="unidade" value="#{higherEducationMB.unidadenegocio}" style="width:180px;"
								converter="UnidadeNegocioConverter" disabled="#{higherEducationMB.habilitarUnidade}" filter="true" filterMatchMode="startsWith" panelStyle="width:180px">
								<f:selectItem itemLabel="Selecione" itemValue="0" noSelectionOption="true" />
								<f:selectItems id="idunidade" value="#{higherEducationMB.listaUnidade}" var="sUnidade"
									itemLabel="#{sUnidade.nomerelatorio}" itemValue="#{sUnidade}" />
								<f:attribute name="listaUnidade" value="#{higherEducationMB.listaUnidade}" />     
							</p:selectOneMenu>  
							<p:selectOneMenu id="situacao" value="#{higherEducationMB.situacao}" style="width:150px;">
								<f:selectItem itemLabel="Selecione" itemValue="sn" />   
								<f:selectItem itemLabel="Questionario" itemValue="Questionario" />
								<f:selectItem itemLabel="Questionario Autorizado" itemValue="Questionario Autorizado" />
								<f:selectItem itemLabel="Ficha Inscrição" itemValue="Ficha Inscrição" />
								<f:selectItem itemLabel="Ficha Inscrição Aprovada" itemValue="Ficha Inscrição Aprovada" />
								<f:selectItem itemLabel="Ficha Final" itemValue="Ficha Final" /> 
								<p:ajax event="change" />  
							</p:selectOneMenu>
							<p:commandButton value="Pesquisar" 
								icon="ui-icon-search" action="#{higherEducationMB.pesquisar()}" update="consHe:tabelaConsHe" />
							<p:commandButton value="Limpar" icon="ui-icon-arrowrefresh-1-w"       
								update="consHe:tabelaConsHe, situacao, unidade, dataFinal, dataIni, cliente,idVenda"
								action="#{higherEducationMB.limpar()}" />
						</h:panelGrid>
						<br></br>   
					</p:tab>   
				</p:accordionPanel> 
				
				<legend id="iUsu2">
					<b>Consulta de Higher Education</b>
				</legend>
				<p:commandButton value="Novo Questionario" icon="ui-icon-plus"
					action="#{higherEducationMB.novoQuestionario()}" style="font-size:12px;margin-left:79.5%" />
				<br></br> <br></br> 
				   
				<p:dataTable id="tabelaConsHe" var="he"  class="tabelaHighSchool"
					value="#{higherEducationMB.listaHe}" scrollable="true" scrollHeight="300" style="margin-bottom:20px"> 
					<p:column headerText="" style="width:43px;text-align:center;" styleClass="alinharCenter"> 
						<img src="#{higherEducationMB.retornarimagem(he.status)}" width="28" title="#{higherEducationMB.retornarTituloFicha(he.status)}"/>      
					</p:column>                 
					<p:column headerText="ID" sortBy="#{he.idVenda}" style="width:50px;" styleClass="alinharCenter"> 
						<h:outputText value="#{he.idVenda}" style="#{higherEducationMB.cor(he)}"/>     
					</p:column>
					<p:column headerText="Cliente" sortBy="#{he.nomecliente}" style="width:150px; ">
						<h:outputText value="#{he.nomecliente}" style="#{higherEducationMB.corNome(he)}"/>
					</p:column>      
					<p:column headerText="Data Envio" sortBy="#{he.data}" style="text-align:center;width:95px;" >
						<h:outputText value="#{he.data}"  style="#{higherEducationMB.cor(he)}">
							<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" />
						</h:outputText>
					</p:column>
					<p:column headerText="Unidade" sortBy="#{he.unidade}" style="width:115px;" styleClass="alinharCenter">
						<h:outputText
							value="#{he.unidade}"  style="#{higherEducationMB.cor(he)}"/>   
					</p:column>
					<p:column headerText="Consultor" sortBy="#{he.consultor}" style="width:120px;" styleClass="alinharCenter">
						<h:outputText value="#{he.consultor}"  style="#{higherEducationMB.cor(he)}"/>
					</p:column>
					<p:column headerText="Parceiro" sortBy="#{he.fornecedor}" style="width:110px;" styleClass="alinharCenter">
						<h:outputText value="#{he.fornecedor}"  style="#{higherEducationMB.cor(he)}"/>
					</p:column>      
					<p:column headerText="Situação" sortBy="#{he.situacao}" style="width:115px;" styleClass="alinharCenter">
						<h:outputText value="#{he.situacao}"  style="#{higherEducationMB.cor(he)}"/>  
					</p:column>
					<p:column style="width:43px;text-align:center;">
						<p:commandLink action="#{higherEducationMB.editar(he)}" title="Editar" style="text-decoration: none">
							<img src="../../resources/img/editaricon.png" width="27" /> 
						</p:commandLink>  
					</p:column> 
					<p:column headerText="Imprimir" style="width:70px;text-align:center;" styleClass="alinharCenter" > 
						<h:commandButton action="#{higherEducationMB.gerarRelatorioFicha(he)}"
							title="Ficha de Inscrição" image="../../resources/img/imprimiFicha.png"
							ajax="false" onclick="this.form.target='_blank'"
							style="width:27px;margin-left:2%" rendered="#{higherEducationMB.desabilitarBtnFichaInscricao(he)}">
						</h:commandButton>             
						<h:commandButton action="#{higherEducationMB.gerarRelatorioContrato(he)}"    
							title="Contrato de Higher Education" image="../../resources/img/imprimiContrato.png"
							ajax="false" onclick="this.form.target='_blank'"  
							style="width:27px;margin-left:2%" rendered="#{higherEducationMB.desabilitarBtnContrato(he)}">
						</h:commandButton>         
					</p:column>             
					
					<p:column headerText="Autorizar" style="width:60px;text-align:center;" styleClass="alinharCenter" rendered="#{usuarioLogadoMB.usuario.grupoacesso.acesso.aprovarquestionariohe}"> 
						<p:selectBooleanCheckbox value="#{he.autorizado}" disabled="#{higherEducationMB.desabilitarBtnAutorizar(he)}">
							<p:ajax event="change" listener="#{higherEducationMB.autorizarQuestionario(he)}" update="tabelaConsHe"/>
						</p:selectBooleanCheckbox>       
					</p:column>    
					
					<p:column headerText="Opções" style="width:75px;text-align:center;">  
						<p:commandLink id="btnInformacoes" title="Visualizar opções.">
							<img src="../../resources/img/informacaoVendaVerde.png" />
						</p:commandLink>
						<p:overlayPanel id="painelInformacoes" for="btnInformacoes"
							hideEffect="fade" style="background:#F0F0F0;width:550px; border:none;">
							<p:outputLabel
								value="#{he.he.vendas.idvendas} - #{he.he.vendas.cliente.nome}"
								style="text-align:center;font-size:15px;" />
							<br />
							<br />
							<h:panelGrid style="width:100%;border-color:transparent;border:none;" columns="5">
							
									<p:commandLink action="#{higherEducationMB.boletos(he)}" title="IMPRIMIR OS BOLETOS"
										image="../../resources/img/boletoFicha.png" ajax="false"  
										target="_blank"
										update=":consHe:growl" > 
										<img src="../../resources/img/boletoFicha.png" width="36" />
												<h:panelGrid columns="1" style="text-align:1px;">
													<p:outputLabel value="BOLETOS" style="font-size:11px;"/>
												</h:panelGrid>
									</p:commandLink>    
									
									<p:commandLink action="#{higherEducationMB.documentacao(he)}" title="DOCUMENTOS" >
										<img src="../../resources/img/arquivosUpload.png" width="36" />
										<h:panelGrid columns="1" style="text-align:1px;">
													<p:outputLabel value="DOCS" style="font-size:11px;"/>
												</h:panelGrid>
									</p:commandLink>  
									 
									<p:commandLink action="#{higherEducationMB.informacoes(he)}"
										update=":consHe:growl" title="INFORMAÇÕES DA VENDA" >
										<img src="../../resources/img/informacao.png" width="36" />
										<h:panelGrid columns="1" style="text-align:1px;">
													<p:outputLabel value="INFO" style="font-size:11px;"/>
												</h:panelGrid>
									</p:commandLink>
									
									<p:commandLink
												action="#{higherEducationMB.visualizarContasReceber(he)}"
												title="VISUALIZAR CONTAS A RECEBER" 
												
												 >
												<img src="../../resources/img/invoice.png" width="36" />
												<h:panelGrid columns="1" style="text-align:center;"> 
													<p:outputLabel value="CONTAS A" style="font-size:10px;"/>
													<p:outputLabel value="RECEBER" style="font-size:10px;"/>
												</h:panelGrid>
											</p:commandLink> 
									
									<p:commandLink action="#{higherEducationMB.cancelarVenda(he)}"
										style="text-decoration: none" title="CANCELAR FICHA" update=":consHe:tabelaConsHe" >
										<p:confirm header="Cancelamento" message="Deseja Cancelar Ficha?" icon="ui-icon-alert" />
										<img src="../../resources/img/cancel.png" style="width: 36" />
										<p:ajax event="dialogReturn"
											listener="#{higherEducationMB.gerarListaHe()}" process="@this"
											update=":consHe:tabelaConsHe" />
											<h:panelGrid columns="1" style="text-align:1px;">
													<p:outputLabel value="CANCELAR" style="font-size:11px;"/>
												</h:panelGrid>
									</p:commandLink>
									
							</h:panelGrid>
						</p:overlayPanel>
					</p:column>              
				</p:dataTable>
				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" style="background:#DDDDE1;">
			    	<div align="center">
				        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"  style="font-size:12px;"/>
				        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"  style="font-size:12px;"/>
			        </div>  
			    </p:confirmDialog>  
				<style>
				.ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td,
					.ui-datatable tfoot th {
					padding: 2px 2px;
					overflow: hidden;
					border-width: 0px;
					border-style: solid;
				}
				.ui-confirm-dialog-message {
				    display: inline-block;
				    margin-top: 1px;
				    font-size: 17px !important;
				}  
				</style>
				<br></br> <br></br>      
			</div>
		</h:form> 
	</ui:define>
</ui:composition>
</html>
